<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
    <title>QARUS Screen Recorder</title>
  <style>
    #settingsBtn {
      position: absolute;
      top: 18px;
      right: 32px;
      background: none;
      border: none;
      box-shadow: none;
      padding: 0;
      cursor: pointer;
      z-index: 1100;
      transition: filter 0.2s;
    }
    #settingsBtn svg {
      width: 26px;
      height: 26px;
      display: block;
      stroke: #f1f1f1;
      background: none;
    }
    #settingsPanel {
      display: none;
      position: fixed;
      top: 60px;
      right: 60px;
      background: linear-gradient(135deg, #23272f 80%, #233a54 100%);
      padding: 32px 40px 24px 40px;
      border-radius: 18px;
      box-shadow: 0 8px 40px #000c, 0 1.5px 0 #3fa6ff44 inset;
      z-index: 1000;
      min-width: 340px;
      min-height: 340px;
      border: 1.5px solid #3fa6ff44;
      animation: fadeInPanel 0.25s;
    }
    @keyframes fadeInPanel {
      from { opacity: 0; transform: translateY(-20px) scale(0.98); }
      to { opacity: 1; transform: none; }
    }
    #settingsPanel h2 {
      margin-top: 0;
      color: #3fa6ff;
      font-size: 1.6em;
      letter-spacing: 0.04em;
      margin-bottom: 18px;
      text-align: left;
    }
    #settingsPanel label {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 18px;
      font-size: 1.08em;
      color: #e0e0e0;
      letter-spacing: 0.01em;
    }
    #settingsPanel input[type="text"] {
      width: 120px;
      text-align: center;
      background: #191b22;
      color: #3fa6ff;
      border: 1.5px solid #3fa6ff44;
      border-radius: 6px;
      font-size: 1.08em;
      padding: 6px 0;
      margin-left: 12px;
      outline: none;
      transition: border 0.2s, background 0.2s;
    }
    #settingsPanel input[type="text"]:focus {
      border: 1.5px solid #3fa6ff;
      background: #23272f;
    }
    #settingsPanel button {
      background: linear-gradient(90deg, #3fa6ff 60%, #1e8fff 100%);
      color: #181a20;
      border: none;
      border-radius: 6px;
      font-weight: 600;
      font-size: 1.08em;
      padding: 8px 22px;
      margin-top: 8px;
      margin-right: 10px;
      cursor: pointer;
      box-shadow: 0 1.5px 0 #3fa6ff44 inset;
      transition: background 0.18s, color 0.18s;
    }
    #settingsPanel button#closeSettings {
      background: none;
      color: #f1f1f1;
      border: 1.5px solid #3fa6ff44;
      margin-right: 0;
      margin-left: 10px;
      padding: 8px 18px;
      font-weight: 500;
      transition: border 0.18s, color 0.18s, background 0.18s;
    }
    #settingsPanel button#closeSettings:hover {
      border: 1.5px solid #3fa6ff;
      color: #3fa6ff;
      background: #23272f;
    }
    #settingsPanel button:hover:not(#closeSettings) {
      background: linear-gradient(90deg, #1e8fff 60%, #3fa6ff 100%);
      color: #181a20;
    }
    #shortcutMsg {
      color: #3fa6ff;
      margin-top: 12px;
      font-size: 1.05em;
      text-align: left;
      min-height: 1.2em;
    }
    #settingsBtn:hover svg {
      filter: brightness(1.3) drop-shadow(0 0 4px #f1f1f188);
    }
    body {
      font-family: 'Inter', 'Segoe UI', 'Arial', sans-serif;
      text-align: center;
      margin: 0;
      padding: 0;
      background: #f7fafd;
      color: #23272f;
      min-height: 100vh;
      overflow-x: hidden;
      overflow-y: auto;
    }
    html {
      scrollbar-width: none;
    }
    body::-webkit-scrollbar, html::-webkit-scrollbar {
      display: none;
    }
    @media (prefers-color-scheme: dark) {
      body {
        background: #181a20;
        color: #f1f1f1;
      }
    }
    #countdown {
      font-size: 3em;
      color: #ff5555;
    }
    video {
      width: 60vw;
      margin-top: 20px;
      border: 2px solid #444;
      background: #222;
      box-shadow: 0 0 16px #000a;
    }
    button, a#downloadLink {
      font-size: 1.2em;
      padding: 10px 30px;
      margin: 10px;
      background: #23272f;
      color: #f1f1f1;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      transition: background 0.2s;
      text-decoration: none;
      display: inline-block;
    }
    button:disabled, a#downloadLink.disabled {
      background: #444a;
      color: #888;
      cursor: not-allowed;
    }
    button:hover:not(:disabled), a#downloadLink:hover:not(.disabled) {
      background: #2d313a;
    }
    a#downloadLink {
      margin-left: 20px;
    }
  </style>
</head>
<body>
  <!-- Screen Recorder Controls -->
  <div class="recorder-ui">
    <div class="status-indicator" id="status-indicator">Idle</div>
    <div class="timer" id="rec-timer">00:00</div>
  </div>
  <h1 style="font-family: 'Inter', 'Segoe UI', 'Arial', sans-serif; font-size:2.4em; letter-spacing:0.01em; color:#3fa6ff; margin-bottom: 8px; font-weight:800;">QARUS Screen Recorder</h1>
  <div style="color:#6a7a8c; font-size:1.13em; margin-bottom: 32px;">1920x1080@60fps, 25Mbps, System Audio</div>
  <button id="settingsBtn" aria-label="Settings" style="background:none;border:none;box-shadow:none;position:absolute;top:18px;right:32px;z-index:1100;cursor:pointer;">
    <ion-icon name="settings-outline" style="font-size:28px;color:#3fa6ff;"></ion-icon>
  </button>
  <div id="settingsPanel">
    <h2 style="color:#3fa6ff;">Settings</h2>
    <form id="shortcutForm" autocomplete="off">
      <label for="shortcutStart">Start Recording:
        <input id="shortcutStart" type="text" readonly>
      </label>
      <label for="shortcutPause">Pause Recording:
        <input id="shortcutPause" type="text" readonly>
      </label>
      <label for="shortcutResume">Resume Recording:
        <input id="shortcutResume" type="text" readonly>
      </label>
      <label for="shortcutStop">Stop Recording:
        <input id="shortcutStop" type="text" readonly>
      </label>
      <div style="display:flex;justify-content:flex-end;margin-top:18px;">
        <button type="button" id="saveShortcuts">Save</button>
        <button type="button" id="closeSettings">Close</button>
      </div>
    </form>
    <div id="shortcutMsg"></div>
  </div>
  <button id="startBtn">Start Recording</button>
  <button id="pauseBtn" disabled>Pause</button>
  <button id="resumeBtn" disabled>Resume</button>
  <button id="stopBtn" disabled>Stop Recording</button>
  <a id="downloadLink" class="disabled" download style="pointer-events:none;">Download Recording</a>
  <div id="duration" style="font-size:1.3em;margin:10px;color:#3fa6ff;"></div>
  <div id="countdown"></div>
  <video id="preview" controls autoplay muted style="display:none"></video>

  <script type="module" src="https://unpkg.com/ionicons@7.2.2/dist/ionicons/ionicons.esm.js"></script>
  <script nomodule src="https://unpkg.com/ionicons@7.2.2/dist/ionicons/ionicons.js"></script>
  <script>
    const startBtn = document.getElementById('startBtn');
    const stopBtn = document.getElementById('stopBtn');
    const pauseBtn = document.getElementById('pauseBtn');
    const resumeBtn = document.getElementById('resumeBtn');
    const durationDiv = document.getElementById('duration');
    const countdownDiv = document.getElementById('countdown');
    const preview = document.getElementById('preview');
    const downloadLink = document.getElementById('downloadLink');
    // Settings panel elements
    const settingsBtn = document.getElementById('settingsBtn');
    const settingsPanel = document.getElementById('settingsPanel');
    const closeSettings = document.getElementById('closeSettings');
    const shortcutForm = document.getElementById('shortcutForm');
    const shortcutStart = document.getElementById('shortcutStart');
    const shortcutPause = document.getElementById('shortcutPause');
    const shortcutResume = document.getElementById('shortcutResume');
    const shortcutStop = document.getElementById('shortcutStop');
    const saveShortcuts = document.getElementById('saveShortcuts');
    const shortcutMsg = document.getElementById('shortcutMsg');

    let mediaRecorder, recordedChunks = [], stream;
    let durationTimer = null, startTime = null, elapsed = 0;
    // Default shortcuts
    let shortcuts = {
      start: 'Shift+R',
      pause: 'Shift+P',
      resume: 'Shift+U',
      stop: 'Shift+S'
    };

    // Load shortcuts from localStorage if available
    function loadShortcuts() {
      const saved = localStorage.getItem('screenrecorder_shortcuts');
      if (saved) {
        try {
          const parsed = JSON.parse(saved);
          if (parsed.start && parsed.pause && parsed.resume && parsed.stop) {
            shortcuts = parsed;
          }
        } catch {}
      }
      shortcutStart.value = shortcuts.start;
      shortcutPause.value = shortcuts.pause;
      shortcutResume.value = shortcuts.resume;
      shortcutStop.value = shortcuts.stop;
    }

    // Save shortcuts to localStorage
    function saveShortcutsToStorage() {
      localStorage.setItem('screenrecorder_shortcuts', JSON.stringify(shortcuts));
    }

    // Settings panel logic
    settingsBtn.onclick = () => {
      loadShortcuts();
      settingsPanel.style.display = 'block';
      shortcutMsg.textContent = '';
    };
    closeSettings.onclick = () => {
      settingsPanel.style.display = 'none';
    };

    // Key capture for shortcut fields
    [shortcutStart, shortcutPause, shortcutResume, shortcutStop].forEach((input, idx) => {
      input.onclick = () => {
        input.value = 'Press keys...';
        let handler = (e) => {
          e.preventDefault();
          let keys = [];
          if (e.ctrlKey) keys.push('Ctrl');
          if (e.shiftKey) keys.push('Shift');
          if (e.altKey) keys.push('Alt');
          if (e.metaKey) keys.push('Meta');
          if (!['Shift','Control','Alt','Meta'].includes(e.key)) keys.push(e.key.length === 1 ? e.key.toUpperCase() : e.key);
          let combo = keys.join('+');
          input.value = combo;
          document.removeEventListener('keydown', handler, true);
        };
        document.addEventListener('keydown', handler, true);
      };
    });

    saveShortcuts.onclick = () => {
      shortcuts.start = shortcutStart.value;
      shortcuts.pause = shortcutPause.value;
      shortcuts.resume = shortcutResume.value;
      shortcuts.stop = shortcutStop.value;
      saveShortcutsToStorage();
      shortcutMsg.textContent = 'Shortcuts saved!';
      setTimeout(()=>{shortcutMsg.textContent='';}, 1200);
    };

  // Load on page load
  loadShortcuts();

  async function startRecording() {
      // Request screen + system audio
      stream = await navigator.mediaDevices.getDisplayMedia({
        video: {
          width: { ideal: 1920 },
          height: { ideal: 1080 },
          frameRate: { ideal: 60, max: 60 }
        },
        audio: { 
          // system audio only, no mic
          echoCancellation: false,
          noiseSuppression: false,
          sampleRate: 48000
        }
      });

      // Remove microphone tracks if present
      stream.getAudioTracks().forEach(track => {
        if (track.label.toLowerCase().includes('microphone')) {
          stream.removeTrack(track);
        }
      });

      // Countdown
      let count = 3;
      countdownDiv.textContent = count;
      startBtn.disabled = true;
      stopBtn.disabled = true;
  preview.style.display = 'none';
  downloadLink.classList.add('disabled');
  downloadLink.style.pointerEvents = 'none';
  durationDiv.textContent = '';
  pauseBtn.disabled = true;
  resumeBtn.disabled = true;

      const countdown = setInterval(() => {
        count--;
        if (count > 0) {
          countdownDiv.textContent = count;
        } else {
          clearInterval(countdown);
          countdownDiv.textContent = '';
          beginRecording();
        }
      }, 1000);
    }

  function beginRecording() {
    recordedChunks = [];
    mediaRecorder = new MediaRecorder(stream, {
      mimeType: 'video/webm;codecs=vp9,opus',
      videoBitsPerSecond: 25000000 // 25 Mbps
    });

    mediaRecorder.ondataavailable = e => {
      if (e.data.size > 0) recordedChunks.push(e.data);
    };
    mediaRecorder.onstop = () => {
      const blob = new Blob(recordedChunks, { type: 'video/webm' });
      preview.src = URL.createObjectURL(blob);
      preview.style.display = '';
      downloadLink.href = preview.src;
      downloadLink.download = 'recording.webm';
      downloadLink.textContent = 'Download Recording';
      downloadLink.classList.remove('disabled');
      downloadLink.style.pointerEvents = '';
      clearInterval(durationTimer);
    };

    mediaRecorder.onpause = () => {
      clearInterval(durationTimer);
    };
    mediaRecorder.onresume = () => {
      startDurationTimer();
    };

    mediaRecorder.start();
    startTime = Date.now();
    elapsed = 0;
    startDurationTimer();
    stopBtn.disabled = false;
    pauseBtn.disabled = false;
    resumeBtn.disabled = true;
  }

    function startDurationTimer() {
      durationTimer = setInterval(() => {
        let now = Date.now();
        let total = elapsed + (mediaRecorder && mediaRecorder.state === 'recording' ? now - startTime : 0);
        let seconds = Math.floor(total / 1000) % 60;
        let minutes = Math.floor(total / 60000);
        durationDiv.textContent = `Duration: ${minutes}:${seconds.toString().padStart(2, '0')}`;
      }, 500);
    }

    startBtn.onclick = startRecording;
    stopBtn.onclick = () => {
      if (mediaRecorder && (mediaRecorder.state === 'recording' || mediaRecorder.state === 'paused')) {
        if (mediaRecorder.state === 'recording') {
          elapsed += Date.now() - startTime;
        }
        mediaRecorder.stop();
        stream.getTracks().forEach(track => track.stop());
        startBtn.disabled = false;
        stopBtn.disabled = true;
        pauseBtn.disabled = true;
        resumeBtn.disabled = true;
      }
    };
    pauseBtn.onclick = () => {
      if (mediaRecorder && mediaRecorder.state === 'recording') {
        elapsed += Date.now() - startTime;
        mediaRecorder.pause();
        pauseBtn.disabled = true;
        resumeBtn.disabled = false;
      }
    };
    resumeBtn.onclick = () => {
      if (mediaRecorder && mediaRecorder.state === 'paused') {
        startTime = Date.now();
        mediaRecorder.resume();
        pauseBtn.disabled = false;
        resumeBtn.disabled = true;
      }
    };

    // Keyboard shortcut handler
    document.addEventListener('keydown', (e) => {
      if (settingsPanel.style.display !== 'none') return; // Don't trigger if settings open
      let keys = [];
      if (e.ctrlKey) keys.push('Ctrl');
      if (e.shiftKey) keys.push('Shift');
      if (e.altKey) keys.push('Alt');
      if (e.metaKey) keys.push('Meta');
      if (!['Shift','Control','Alt','Meta'].includes(e.key)) keys.push(e.key.length === 1 ? e.key.toUpperCase() : e.key);
      let combo = keys.join('+');
      if (combo === shortcuts.start && !startBtn.disabled) {
        e.preventDefault();
        startBtn.click();
      } else if (combo === shortcuts.pause && !pauseBtn.disabled) {
        e.preventDefault();
        pauseBtn.click();
      } else if (combo === shortcuts.resume && !resumeBtn.disabled) {
        e.preventDefault();
        resumeBtn.click();
      } else if (combo === shortcuts.stop && !stopBtn.disabled) {
        e.preventDefault();
        stopBtn.click();
      }
    });
    // Prevent download if not ready
    downloadLink.onclick = (e) => {
      if (downloadLink.classList.contains('disabled')) {
        e.preventDefault();
      }
    };
  </script>
</body>
<!-- Supabase & Firebase Integration for Video Uploads -->
<script type="module">
  // Import Supabase
  import { createClient } from 'https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm';
  // Import Firebase Auth
  import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/12.1.0/firebase-auth.js";

  // Supabase config
  const supabaseUrl = 'https://mxwibqkhmgjqfebgfyqq.supabase.co';
  const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im14d2licWtobWdqcWZlYmdmeXFxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ5MjgyMTYsImV4cCI6MjA3MDUwNDIxNn0.AB_bBmRpwjgvCsO2dWbrS9_QpWhcjuYoMn_0SxxOavc';
  const supabase = createClient(supabaseUrl, supabaseKey);

  // Firebase Auth instance (assumes Firebase is already initialized)
  const auth = getAuth();
  let currentUser = null;
  onAuthStateChanged(auth, (user) => {
    currentUser = user;
  });

  // Upload video to Supabase Storage under user's UID folder
  async function uploadVideoToSupabase(file, filename) {
    if (!currentUser) {
      alert('You must be signed in to save videos.');
      return null;
    }
    const userId = currentUser.uid;
    const path = `${userId}/${filename}`;
    const { data, error } = await supabase.storage.from('videos').upload(path, file, { upsert: true, contentType: file.type });
    if (error) {
      alert('Upload failed: ' + error.message);
      return null;
    }
    return data;
  }

  // Example integration: Call uploadVideoToSupabase(blob, 'recording.webm') after recording
  // Example:
  // const file = new File([blob], 'recording.webm', { type: 'video/webm' });
  // await uploadVideoToSupabase(file, 'recording.webm');
</script>
<!-- Enhanced Video Preview Modal -->
<div id="videoPreviewModal" class="preview-modal">
  <div class="preview-content">
    <span class="close-preview" id="closePreviewBtn">&times;</span>
    <h2>Preview Your Recording</h2>
    <video id="previewVideo" controls style="width:100%;border-radius:12px;box-shadow:0 4px 24px rgba(0,0,0,0.13);margin-bottom:18px;"></video>
    <div class="preview-actions">
      <button class="preview-btn" id="downloadBtn">Download</button>
      <button class="preview-btn" id="saveBtn">Save</button>
      <button class="preview-btn" id="deleteBtn">Delete</button>
    </div>
    <div id="previewFeedback" class="preview-feedback"></div>
  </div>
</div>
<style>
  .preview-modal {
    display: none;
    position: fixed;
    z-index: 2000;
    left: 0; top: 0; width: 100vw; height: 100vh;
    background: rgba(0,0,0,0.45);
    justify-content: center;
    align-items: center;
    transition: background 0.3s;
  }
  .preview-modal.active {
    display: flex;
  }
  .preview-content {
    background: #fff;
    color: #222;
    border-radius: 18px;
    padding: 32px 28px 24px 28px;
    min-width: 340px;
    max-width: 95vw;
    max-height: 90vh;
    box-shadow: 0 8px 40px rgba(0,0,0,0.18);
    position: relative;
    display: flex;
    flex-direction: column;
    align-items: center;
    animation: fadeInUp 0.5s;
  }
  .close-preview {
    position: absolute;
    top: 18px; right: 22px;
    font-size: 2rem;
    color: #888;
    cursor: pointer;
    transition: color 0.2s;
  }
  .close-preview:hover {
    color: #ff5252;
  }
  .preview-actions {
    display: flex;
    gap: 18px;
    margin-bottom: 10px;
  }
  .preview-btn {
    background: #3fa6ff;
    color: #fff;
    border: none;
    border-radius: 6px;
    padding: 12px 28px;
    font-size: 1.1rem;
    font-weight: 600;
    cursor: pointer;
    box-shadow: 0 2px 8px rgba(0,0,0,0.07);
    transition: background 0.2s, transform 0.2s;
    position: relative;
    overflow: hidden;
  }
  .preview-btn:hover {
    background: #1e88e5;
    transform: translateY(-2px);
  }
  .preview-feedback {
    min-height: 28px;
    font-size: 1.05rem;
    color: #3fa6ff;
    text-align: center;
    margin-top: 6px;
    font-weight: 500;
    letter-spacing: 0.5px;
  }
  .preview-feedback.animated {
    animation: popFade 1.1s;
  }
  @keyframes popFade {
    0% { opacity: 0; transform: scale(0.8); }
    20% { opacity: 1; transform: scale(1.08); }
    60% { opacity: 1; transform: scale(1); }
    100% { opacity: 0; transform: scale(0.95); }
  }
</style>
<script>
// --- Enhanced Video Preview & Animated Feedback ---
const previewModal = document.getElementById('videoPreviewModal');
const previewVideo = document.getElementById('previewVideo');
const closePreviewBtn = document.getElementById('closePreviewBtn');
const downloadBtn = document.getElementById('downloadBtn');
const saveBtn = document.getElementById('saveBtn');
const deleteBtn = document.getElementById('deleteBtn');
const previewFeedback = document.getElementById('previewFeedback');

function showVideoPreview(videoURL) {
  previewVideo.src = videoURL;
  previewModal.classList.add('active');
}

function closeVideoPreview() {
  previewModal.classList.remove('active');
  previewVideo.pause();
  previewVideo.src = '';
}

closePreviewBtn.onclick = closeVideoPreview;

// Animated feedback helper
function showFeedback(msg) {
  previewFeedback.textContent = msg;
  previewFeedback.classList.add('animated');
  setTimeout(() => {
    previewFeedback.classList.remove('animated');
    previewFeedback.textContent = '';
  }, 1100);
}

// Example download/save/delete logic (replace with your actual logic)
downloadBtn.onclick = function() {
  showFeedback('Downloading...');
  // Simulate download
  setTimeout(() => showFeedback('Downloaded!'), 700);
};
saveBtn.onclick = function() {
  showFeedback('Saving...');
  // Simulate save
  setTimeout(() => showFeedback('Saved!'), 700);
};
deleteBtn.onclick = function() {
  showFeedback('Deleting...');
  // Simulate delete
  setTimeout(() => {
    showFeedback('Deleted!');
    closeVideoPreview();
  }, 700);
};

// To show the preview after recording, call showVideoPreview(url)
// Example: showVideoPreview('your-recorded-video-url.webm');
</script>
<style>
  .recorder-ui {
    display: flex;
    align-items: center;
    gap: 24px;
    justify-content: center;
    margin: 32px 0 16px 0;
  }
  .status-indicator {
    padding: 8px 18px;
    border-radius: 20px;
    font-weight: 600;
    font-size: 1.1rem;
    background: #f3f3f3;
    color: #333;
    box-shadow: 0 2px 8px rgba(0,0,0,0.07);
    border: 1px solid #e0e0e0;
    transition: background 0.3s, color 0.3s;
  }
  .status-indicator.recording {
    background: #ff5252;
    color: #fff;
    animation: pulse 1.2s infinite;
  }
  .status-indicator.paused {
    background: #ffd600;
    color: #333;
  }
  .status-indicator.stopped {
    background: #bdbdbd;
    color: #fff;
  }
  @keyframes pulse {
    0% { box-shadow: 0 0 0 0 rgba(255,82,82,0.4); }
    70% { box-shadow: 0 0 0 10px rgba(255,82,82,0); }
    100% { box-shadow: 0 0 0 0 rgba(255,82,82,0); }
  }
  .timer {
    font-size: 1.3rem;
    font-family: 'Roboto Mono', monospace;
    background: #222;
    color: #fff;
    padding: 8px 18px;
    border-radius: 20px;
    letter-spacing: 2px;
    min-width: 70px;
    text-align: center;
    box-shadow: 0 2px 8px rgba(0,0,0,0.07);
  }
</style>
<script>
// --- Timer and Status Indicator Logic ---
let timerInterval = null;
let secondsElapsed = 0;
const timerEl = document.getElementById('rec-timer');
const statusEl = document.getElementById('status-indicator');

function setStatus(status) {
  statusEl.textContent = status.charAt(0).toUpperCase() + status.slice(1);
  statusEl.className = 'status-indicator ' + status;
}

function startTimer() {
  clearInterval(timerInterval);
  secondsElapsed = 0;
  timerEl.textContent = '00:00';
  timerInterval = setInterval(() => {
    secondsElapsed++;
    const min = String(Math.floor(secondsElapsed / 60)).padStart(2, '0');
    const sec = String(secondsElapsed % 60).padStart(2, '0');
    timerEl.textContent = `${min}:${sec}`;
  }, 1000);
}

function pauseTimer() {
  clearInterval(timerInterval);
}

function resetTimer() {
  clearInterval(timerInterval);
  secondsElapsed = 0;
  timerEl.textContent = '00:00';
}

// Example usage (replace with your actual recording logic):
// setStatus('recording'); startTimer();
// setStatus('paused'); pauseTimer();
// setStatus('stopped'); resetTimer();
</script>
</html>
